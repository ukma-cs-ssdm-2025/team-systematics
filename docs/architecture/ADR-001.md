# ADR-001: Автозбереження відповідей

**Статус:** Прийнято

**Дата:** 2025-09-29

## Контекст

* **FR-006** вимагає можливості для наглядачів подовжувати час іспиту.
* **FR-007** вимагає підтримки іспитів з обмеженням у часі.
* **REL-001** вимагає збереження даних студентів у разі збою системи.
* **REL-002** вимагає автоматичного збереження відповідей під час іспиту.
* **SEC-002** вимагає автоматичного завершення сесії після 25 хвилин бездіяльності.

## Рішення

1.  Відповіді студента зберігаються на сервері після кожного натискання кнопки «Зберегти».
2.  У випадку втрати інтернет-з'єднання, відповіді тимчасово зберігаються в локальному сховищі браузера (localStorage). Після відновлення з'єднання дані автоматично синхронізуються з сервером.
3.  У базі даних створюється один фінальний запис для кожної наданої відповіді. Цей запис більше не змінюється і не перезаписується, що гарантує цілісність даних.
4.  Система надає наглядачу можливість індивідуально додавати час для студента, і цей час оновлюється на стороні клієнта без переривання іспиту.

## Наслідки

### Позитивні

* ✅ **Надійність**: Дані не губляться у разі збою мережі, браузера або комп'ютера.
* ✅ **Цілісність та прозорість**: Незмінність записів унеможливлює зміну відповіді після перегляду наступних питань.
* ✅ **Чітке відновлення сесії**: У разі збою система точно знає, на якому питанні зупинився студент, що спрощує відновлення.
* ✅ **Продуктивність**: Архітектура, що базується на незмінних записах (INSERT-only), є швидкою та добре масштабується.

### Негативні

* ⚠️ **Підвищене навантаження:** Часті запити на збереження збільшують навантаження на сервер та базу даних.
* ⚠️ **Неможливість виправити помилку**: Якщо студент випадково натиснув не ту кнопку, він не зможе виправити свою відповідь.
## Альтернативи

*   **Збереження відповідей лише в кінці іспиту:**
    *   **Відхилено:** Високий ризик втрати всіх даних у разі збою комп'ютера, браузера або інтернет-з'єднання перед завершенням іспиту.
* **Збереження лише в локальному сховищі браузера**:
    * Відхилено: Надзвичайно високий ризик втрати даних у разі збою на стороні клієнта.